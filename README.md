На первой работе нужно было написать сервис, отдающий данные для рендера тонкого клиента Холтера. На записи есть "эпизоды" - всякие тахикардии, аритмии, брадикардии, и прочее. Эти эпизоды можно редактировать. Хранятся эти эпизоды в одном огромном массиве, где каждый элемент - энум эпизода для 1/8 секунды записи. Раньше это не вызывало проблем, ведь приложение было толстым, наоборот, одни плюсы - код для редактирования эпизодов был максимально простым, нужно только перезаписать энумы на выбранном участке. Теперь же нужно эти данные отправлять по сети. Конечно, ~700кб - это не особо много, но все же хотелось как-то оптимизировать этот момент, и для этого я написал вот эту структуру данных. Она может ассоциировать значение с промежутком, перезаписывать частично или полностью промежуток другим значением, удалять промежутки или делать в них дыры, а так же автоматически объединять соседние промежутки с одинаковыми значениями. Мне она понравилась, и я решил ее сохранить. Там потом еще итератор был, плюс интерфейс в стиле std, но это не сохранилось, надо будет сделать.
